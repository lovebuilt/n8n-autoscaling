# Core Configuration
COMPOSE_PROJECT_NAME=n8n-autoscaling

# Logging
# Use INFO for production (only logs events: scaling actions, queue activity, errors)
LOG_LEVEL=INFO
COMPOSE_FILE_PATH=/app/docker-compose.yml
GENERIC_TIMEZONE=America/Chicago
MIN_REPLICAS=1
MAX_REPLICAS=5
SCALE_UP_QUEUE_THRESHOLD=5
SCALE_DOWN_QUEUE_THRESHOLD=2
POLLING_INTERVAL_SECONDS=30
COOLDOWN_PERIOD_SECONDS=180

# n8n Configuration
N8N_DIAGNOSTICS_ENABLED=false
N8N_USER_FOLDER=/n8n
N8N_SECURE_COOKIE=true
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true
N8N_ENCRYPTION_KEY=your-encryption-key-here
N8N_HOST=yourdomain.com
N8N_PROTOCOL=https
N8N_WEBHOOK=webhook.yourdomain.com
N8N_WEBHOOK_URL=https://webhook.yourdomain.com/
WEBHOOK_URL=https://webhook.yourdomain.com/
N8N_EDITOR_BASE_URL=https://yourdomain.com/

# Execution mode
EXECUTIONS_MODE=queue
QUEUE_BULL_REDIS_HOST=redis
QUEUE_HEALTH_CHECK_ACTIVE=true

# Execution pruning
EXECUTIONS_DATA_PRUNE=true
EXECUTIONS_DATA_MAX_AGE=168

# Database
DB_TYPE=postgresdb
POSTGRES_HOST=postgres
POSTGRES_DB=n8n
POSTGRES_USER=n8n
POSTGRES_PASSWORD=your-postgres-password-here
PGDATA=/var/lib/postgresql/data/pgdata

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
QUEUE_NAME_PREFIX=bull
QUEUE_NAME=jobs

# Task Runner (n8n 2.0)
N8N_RUNNERS_AUTH_TOKEN=your-runner-auth-token-here
N8N_RUNNERS_MAX_CONCURRENCY=5
N8N_RUNNERS_AUTO_SHUTDOWN_TIMEOUT=60
OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true

# Scaling
N8N_WORKER_SERVICE_NAME=n8n-worker
N8N_WORKER_RUNNER_SERVICE_NAME=n8n-worker-runner

# Graceful shutdown
N8N_QUEUE_BULL_GRACEFULSHUTDOWNTIMEOUT=300
N8N_GRACEFUL_SHUTDOWN_TIMEOUT=300

# Networking
TAILSCAPE_IP=127.0.0.1
CLOUDFLARE_TUNNEL_TOKEN=your-cloudflare-tunnel-token-here

# Community packages
N8N_COMMUNITY_PACKAGES_ENABLED=true
NODE_FUNCTION_ALLOW_EXTERNAL=moment,ajv,ajv-formats,puppeteer-core,puppeteer-extra,puppeteer-extra-plugin-stealth,playwright-core,playwright-extra,sharp
